<html>
	<head>
		<script src="lib/produce.js"></script>
		<meta charset="utf-8"/>
		<script>
			function doSomethingOnFileIsLoaded(event){
				var imageData = new Uint8Array(event.target.result);
				console.log("works");
				var blob = new Blob([imageData], {type: "image/png"});
                var blobTempUrl = URL.createObjectURL(blob);
                var element = document.getElementById("result_image");
                element.onload = function() {
                    let _canvas = document.createElement("canvas");
                    _canvas.width = element.width;
                    _canvas.height = element.height;
                    let _c2d = _canvas.getContext("2d");
                    _c2d.drawImage(element, 0, 0);
                    let bitmap = _c2d.getImageData(0, 0, element.width, element.height);
                    
                    console.log(bitmap);
                };

                element.src = blobTempUrl;
            };
            
			function fileLoader(event) {
				var file = this.files[0];
				var reader = new FileReader();
				reader.onload = doSomethingOnFileIsLoaded;
				reader.readAsArrayBuffer(file);
			};
		</script>
	</head>
	<body>
		<button id="init_button" >Init Application</button>
		<input type="file" id="uploader" />
		<label>Width:</label>
		<input type="number" default="200" min="10" max="30000" value="10" id="width"/>
		<label>Height:</label>
		<input type="number" default="200" min="10" max="30000" value="10" id="height"/>
		<button id="process_button">Resize</button>
        <img id="result_image" class="image" />
	</body>
	<script>
		var uploader = document.getElementById("uploader");
		uploader.addEventListener("change", fileLoader)
	</script>

=======
<body onload="onLoad()">
    <input type="file" id="uploader" accept="image/*" />
>>>>>>> Stashed changes
</html>